//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18408
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;

public class ConfigurableCombatNode : ICombatNode
{
	protected float [] mPropertyAdd;
	protected float [] mPropertyMultiply;

	public ConfigurableCombatNode ()
	{
		mPropertyAdd = new float[(int)CombatProperty.COUNT];
		mPropertyMultiply = new float[(int)CombatProperty.COUNT];

		for(int i=0; i < (int)CombatProperty.COUNT; i++) {
			mPropertyMultiply[i] = 1f;
		}
	}

	public float GetPropertyAdd (CombatProperty property)
	{
		return mPropertyAdd[(int)property];
	}

	public float GetPropertyMultiply (CombatProperty property)
	{
		return mPropertyMultiply[(int)property];
	}

	/// <summary>
	/// Read and load the general modifiers.
	/// </summary>
	/// <param name="modifiers">Modifiers.</param>
	public void ReadGeneralModifiers(GeneralOffensiveModifier [] modifiers) {
		// parse out general
		if(modifiers != null) {
			foreach(GeneralOffensiveModifier mod in modifiers) {
				switch(mod.type) {
				case GeneralOffensiveModifierType.TOTAL_DMG_ADD:
					this.mPropertyAdd[(int)CombatProperty.TOTAL_DAMAGE] = mod.modValue;
					break;
				case GeneralOffensiveModifierType.TOTAL_DMG_MULTIPLY:
					this.mPropertyMultiply[(int)CombatProperty.TOTAL_DAMAGE] = mod.modValue;
					break;	
				case GeneralOffensiveModifierType.CRIT_CHANCE_ADD:
					this.mPropertyAdd[(int)CombatProperty.CRIT_CHANCE] = mod.modValue;
					break;
				case GeneralOffensiveModifierType.CRIT_CHANCE_MULTIPLY:
					this.mPropertyMultiply[(int)CombatProperty.CRIT_CHANCE] = mod.modValue;
					break;
				}
			}
		}
	}

	public void ReadStatModifiers(StatModifier [] modifiers) {
		// parse out general
		if(modifiers != null) {
			foreach(StatModifier mod in modifiers) {
				switch(mod.stat) {
				case StatType.STR:
					this.mPropertyMultiply[(int)CombatProperty.STR] = mod.mod;
					break;				
				case StatType.VIT:
					this.mPropertyMultiply[(int)CombatProperty.VIT] = mod.mod;
					break;
				case StatType.DEX:
					this.mPropertyMultiply[(int)CombatProperty.DEX] = mod.mod;
					break;
				case StatType.AGI:
					this.mPropertyMultiply[(int)CombatProperty.AGI] = mod.mod;
					break;
				case StatType.INT:
					this.mPropertyMultiply[(int)CombatProperty.INT] = mod.mod;
					break;
				case StatType.WIS:
					this.mPropertyMultiply[(int)CombatProperty.WIS] = mod.mod;
					break;
				case StatType.LUCK:
					this.mPropertyMultiply[(int)CombatProperty.LUCK] = mod.mod;
					break;
				}
			}
		}
	}

	public void ReadPhysicalModifiers(PhysicalOffensiveModifier [] modifiers) {
		// parse out physical
		if(modifiers != null) {
			foreach(PhysicalOffensiveModifier mod in modifiers) {
				switch(mod.type) {
				case PhysicalOffensiveModifierType.POWER_PHYSICAL_ADD:
					this.mPropertyAdd[(int)CombatProperty.POWER_PHYSICAL] = mod.modValue;
					break;
				case PhysicalOffensiveModifierType.POWER_PHYSICAL_MULTIPLY:
					this.mPropertyMultiply[(int)CombatProperty.POWER_PHYSICAL] = mod.modValue;
					break;
				case PhysicalOffensiveModifierType.DODGE_IGNORE_ADD:
					this.mPropertyAdd[(int)CombatProperty.REFLEX_IGNORE] = mod.modValue;
					break;
				case PhysicalOffensiveModifierType.DODGE_IGNORE_MULTIPLY:
					this.mPropertyMultiply[(int)CombatProperty.REFLEX_IGNORE] = mod.modValue;
					break;					
				case PhysicalOffensiveModifierType.ARMOR_IGNORE_ADD:
					this.mPropertyAdd[(int)CombatProperty.RESIST_IGNORE] = mod.modValue;
					break;
				case PhysicalOffensiveModifierType.ARMOR_IGNORE_MULTIPLY:
					this.mPropertyMultiply[(int)CombatProperty.RESIST_IGNORE] = mod.modValue;
					break;					
				}
			}
		}		
	}

	public void ReadMagicalModifiers(MagicalOffensiveModifier [] modifiers) {
		// parse out physical
		if(modifiers != null) {
			foreach(MagicalOffensiveModifier mod in modifiers) {
				switch(mod.type) {
				case MagicalOffensiveModifierType.POWER_MAGICAL_ADD:
					this.mPropertyAdd[(int)CombatProperty.POWER_MAGIC] = mod.modValue;
					break;
				case MagicalOffensiveModifierType.POWER_MAGICAL_MULTIPLY:
					this.mPropertyMultiply[(int)CombatProperty.POWER_MAGIC] = mod.modValue;
					break;
				case MagicalOffensiveModifierType.RESIST_IGNORE_ADD:
					this.mPropertyAdd[(int)CombatProperty.RESIST_IGNORE] = mod.modValue;
					break;
				case MagicalOffensiveModifierType.RESIST_IGNORE_MULTIPLY:
					this.mPropertyMultiply[(int)CombatProperty.RESIST_IGNORE] = mod.modValue;
					break;
				}
			}
		}		
	}
}


